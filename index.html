<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TIME TO STUDY!!!</title>
  <style>
    :root{
      --bg0:#070A12;
      --bg1:#0B1020;
      --card: rgba(255,255,255,.07);
      --card2: rgba(255,255,255,.10);
      --stroke: rgba(255,255,255,.14);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.70);
      --accent:#7CFFB2;
      --accent2:#8BD3FF;
      --warn:#FFD36E;
      --bad:#FF7C9B;
      --shadow: 0 14px 44px rgba(0,0,0,.40);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(1100px 700px at 18% 10%, rgba(139,211,255,.14), transparent 55%),
        radial-gradient(1200px 800px at 85% 15%, rgba(124,255,178,.12), transparent 55%),
        radial-gradient(900px 700px at 40% 95%, rgba(255,211,110,.10), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }

    /* subtle "code + notebook" texture */
    .texture{
      position:fixed; inset:0; pointer-events:none; z-index:0;
      background:
        /* faint grid like notebook */
        linear-gradient(rgba(255,255,255,.04) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,.03) 1px, transparent 1px),
        /* tiny angle strokes (like doodles) */
        repeating-linear-gradient(135deg, rgba(255,255,255,.02) 0 2px, transparent 2px 18px);
      background-size: 48px 48px, 48px 48px, 140px 140px;
      mix-blend-mode: soft-light;
      opacity:.55;
    }

    .wrap{
      position:relative; z-index:1;
      width:min(980px, 92vw);
      margin: 28px auto 80px;
      display:grid;
      gap:16px;
    }

    .topbar{
      display:flex; gap:10px; flex-wrap:wrap;
      align-items:center; justify-content:space-between;
      margin-bottom:2px;
    }
    .chip{
      font-size:12px;
      padding:8px 10px;
      border-radius:999px;
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.14);
      color:var(--muted);
      backdrop-filter: blur(10px);
    }
    .chip b{color:var(--text)}
    .chip .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}

    .card{
      background:var(--card);
      border:1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px;
      backdrop-filter: blur(10px);
    }

    .hero{
      padding: 22px 18px;
      overflow:hidden;
      position:relative;
    }
    .hero:before{
      content:"";
      position:absolute; inset:-40px -40px auto auto;
      width:220px; height:220px;
      background: radial-gradient(circle at 35% 35%, rgba(124,255,178,.22), transparent 60%);
      filter: blur(4px);
      transform: rotate(18deg);
      pointer-events:none;
    }
    h1{
      margin:0 0 8px 0;
      font-size: clamp(26px, 4vw, 42px);
      letter-spacing:.6px;
      text-transform:uppercase;
    }
    p{
      margin:0;
      color:var(--muted);
      line-height:1.5;
      font-size: 14px;
    }

    .btnRow{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px}
    button{
      border:0;
      border-radius: 14px;
      padding: 11px 13px;
      font-weight:750;
      cursor:pointer;
      color:#071015;
      background: linear-gradient(180deg, var(--accent), #4CFF9C);
      box-shadow: 0 14px 26px rgba(124,255,178,.14);
      transition: transform .08s ease, filter .12s ease;
    }
    button:hover{filter:brightness(1.03)}
    button:active{transform:translateY(1px)}
    button.secondary{
      color:var(--text);
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.16);
      box-shadow:none;
    }
    button.warn{
      color:#0b0f1a;
      background: linear-gradient(180deg, var(--warn), #ffbf3c);
      box-shadow: 0 14px 26px rgba(255,211,110,.14);
    }
    button.danger{
      color:var(--text);
      background: rgba(255,124,155,.14);
      border:1px solid rgba(255,124,155,.28);
      box-shadow:none;
    }

    .grid2{
      display:grid;
      gap:16px;
      grid-template-columns: 1.2fr .8fr;
    }
    @media (max-width: 880px){
      .grid2{grid-template-columns:1fr}
    }

    .sectionTitle{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      margin-bottom:10px;
    }
    .sectionTitle h2{
      margin:0;
      font-size:16px;
      letter-spacing:.3px;
      text-transform:uppercase;
      color:rgba(255,255,255,.86);
    }
    .sectionTitle .hint{
      font-size:12px;
      color:var(--muted);
      display:flex; gap:8px; align-items:center;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    .monoBox{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 13px;
      color: rgba(255,255,255,.85);
      background: rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.12);
      border-radius: 14px;
      padding: 12px 12px;
      line-height:1.45;
      white-space: pre-line;
    }

    .lines{display:grid; gap:10px}
    .line{
      padding: 12px 12px;
      border-radius: 14px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      color: rgba(255,255,255,.86);
      line-height:1.45;
    }
    .line b{color:var(--text)}
    .kicker{color: var(--muted); font-size:12px; margin-top:6px}

    .timerBig{
      font-size: 40px;
      font-weight: 850;
      letter-spacing:.7px;
      margin: 6px 0 2px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }
    .timerLabel{
      color:var(--muted);
      font-size: 13px;
    }

    textarea,input{
      width:100%;
      padding: 11px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color: var(--text);
      outline:none;
      font-size: 14px;
    }
    textarea{min-height: 110px; resize: vertical; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
    input::placeholder, textarea::placeholder{color: rgba(255,255,255,.40)}

    .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    .row > *{flex:1}
    .row .tight{flex:0 0 160px}

    .progressWrap{margin-top:10px}
    .progress{
      height:10px;
      border-radius:999px;
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.14);
      overflow:hidden;
    }
    .bar{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      border-radius:999px;
      transition: width .35s ease;
    }
    .small{
      font-size:12px; color:var(--muted);
      margin-top:8px; line-height:1.45;
    }

    /* Quiz */
    .quizCard{padding:18px}
    .quizIntro{
      font-size:14px; color:var(--muted); line-height:1.55;
      margin-bottom:12px;
    }
    .qTitle{
      font-size:16px;
      margin: 6px 0 10px;
      color: rgba(255,255,255,.90);
      font-weight: 750;
    }
    .quizControls{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px}
    .msg{
      margin-top:10px;
      font-size:13px;
      color: rgba(255,255,255,.78);
    }
    .msg.good{color: var(--accent)}
    .msg.bad{color: var(--bad)}
    .choices{display:grid; gap:10px; margin-top:8px}
    .choice{
      display:flex; align-items:center; gap:10px;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      cursor:pointer;
      user-select:none;
      transition: filter .12s ease;
    }
    .choice:hover{filter:brightness(1.03)}
    .choice input{width:auto}
    .divider{height:1px; background: rgba(255,255,255,.10); margin: 14px 0}

    .center{
      text-align:center;
      padding: 26px 16px;
    }
    .center .bigWin{
      font-size: clamp(32px, 4vw, 46px);
      font-weight: 900;
      letter-spacing:.6px;
      margin: 2px 0 10px;
    }
    .center .subWin{
      color: var(--muted);
      font-size: 14px;
      line-height:1.55;
      margin: 0 auto;
      max-width: 560px;
    }
    .center .killer{
      margin-top:12px;
      font-size: 18px;
      font-weight: 850;
      color: rgba(255,255,255,.92);
      letter-spacing:.3px;
    }

    .toast{
      position:fixed;
      bottom:18px;
      left:50%;
      transform:translateX(-50%);
      background: rgba(10,12,18,.78);
      border:1px solid rgba(255,255,255,.16);
      border-radius: 14px;
      padding:10px 12px;
      color:rgba(255,255,255,.88);
      box-shadow: var(--shadow);
      opacity:0;
      pointer-events:none;
      transition: opacity .25s ease, transform .25s ease;
      backdrop-filter: blur(10px);
      max-width:min(560px, 92vw);
      text-align:center;
      z-index:10;
    }
    .toast.show{
      opacity:1;
      transform:translateX(-50%) translateY(-6px);
    }
    .hidden{display:none !important}

    /* Smooth section spacing */
    section{scroll-margin-top: 18px}
  </style>
</head>

<body>
  <div class="texture" aria-hidden="true"></div>

  <div class="wrap">
    <div class="topbar">
      <div class="chip"><b>CS Mode</b> <span class="mono">/</span> <span id="today"></span></div>
      <div class="chip">Status: <span class="mono" id="statusChip">In Progress</span></div>
    </div>

    <!-- SECTION 1 -->
    <section class="card hero" id="s1">
      <h1>TIME TO STUDY!!!</h1>
      <p>
        i know i cannot sit next to you (although usse distract hi hota) but this page might help idk
      </p>
      <div class="btnRow">
        <button id="startStudyingBtn">start studying</button>
        <button class="secondary" id="jumpQuizBtn">jump to quiz üòå</button>
      </div>
      <div class="kicker">ps: yes, i‚Äôm watching.</div>
    </section>

    <div class="grid2">
      <!-- LEFT COLUMN -->
      <div class="card" id="s2">
        <div class="sectionTitle">
          <h2>Section 2: Countdown</h2>
          <div class="hint">&lt;deadline/&gt;</div>
        </div>
        <div class="line" style="font-size:18px; font-weight:800;">
          ‚è≥ 2 days to go
        </div>
        <div class="lines" style="margin-top:10px;">
          <div class="line"><b>This exam isn't scared of you, yet.</b></div>
          <div class="line"><b>You have procrastinated enough to earn a PhD in aalas.</b></div>
        </div>
        <div class="divider"></div>

        <div class="sectionTitle">
          <h2>Timer</h2>
          <div class="hint">pomodoro()</div>
        </div>

        <div class="monoBox">
          // rules:
          // phone away
          // one task only
          // after finishing -> make me proud
        </div>

        <div class="timerBig" id="timer">25:00</div>
        <div class="timerLabel" id="timerLabel">Focus session (25 min)</div>
        <div class="btnRow" style="margin-top:10px">
          <button id="timerToggle">Start ‚ñ∂</button>
          <button class="secondary" id="timerReset">Reset ‚Ü∫</button>
          <button class="danger" id="timerSkip">Skip ‚è≠</button>
        </div>
        <div class="small">Tip: 2‚Äì3 cycles today and you‚Äôre basically unstoppable.</div>
      </div>

      <!-- RIGHT COLUMN -->
      <div class="card" id="s3">
        <div class="sectionTitle">
          <h2>Section 3: Mission Mode</h2>
          <div class="hint">mission.brief()</div>
        </div>

        <div class="monoBox">MISSION: Clear This Exam
ALLY: Me üíõ
ENEMY: Distraction
STATUS: In Progress</div>

        <div class="divider"></div>

        <div class="sectionTitle">
          <h2>Daily tasks</h2>
          <div class="hint">write_it()</div>
        </div>

        <textarea id="tasksBox" placeholder="- 2 pomodoros
- revise ____
- solve ____ questions"></textarea>
        <div class="row" style="margin-top:10px;">
          <div>
            <label class="small" for="progressInput" style="display:block; margin-bottom:6px;">Progress today (%)</label>
            <input id="progressInput" type="number" min="0" max="100" placeholder="e.g., 40" />
          </div>
          <div class="tight">
            <label class="small" style="display:block; margin-bottom:6px;">Quick set</label>
            <div class="row" style="gap:8px;">
              <button class="secondary" data-p="25" style="padding:10px 10px;">25%</button>
              <button class="secondary" data-p="50" style="padding:10px 10px;">50%</button>
              <button class="secondary" data-p="75" style="padding:10px 10px;">75%</button>
              <button class="warn" data-p="100" style="padding:10px 10px;">100%</button>
            </div>
          </div>
        </div>

        <div class="progressWrap">
          <div class="progress"><div class="bar" id="bar"></div></div>
          <div class="small" id="progressText">Progress: 0%</div>
        </div>

        <div class="btnRow">
          <button class="secondary" id="saveMission">Save ‚úÖ</button>
          <button class="secondary" id="goS4">Next ‚Üí</button>
        </div>
      </div>
    </div>

    <!-- SECTION 4 -->
    <section class="card" id="s4">
      <div class="sectionTitle">
        <h2>Section 4: Motivation</h2>
        <div class="hint">khushi.push()</div>
      </div>

      <div class="lines">
        <div class="line"><b>chup chap padhle taaki others get jealous of youu and look up to you</b></div>
        <div class="line"><b>and then bahot saara study karke bahot saara earn bhi toh karna hai na</b></div>
        <div class="line"><b>and then ghar nahi lena tujhe?</b> üòå</div>
      </div>

      <div class="btnRow">
        <button id="goQuiz" class="warn">Okay, okay üò≠ take me to quiz</button>
        <button id="scrollToClose" class="secondary">Skip to final üòå</button>
      </div>
    </section>

    <!-- SECTION 5 QUIZ -->
    <section class="card quizCard" id="quiz">
      <div class="sectionTitle">
        <h2>Section 5: Mini lil quiz</h2>
        <div class="hint">quiz.run()</div>
      </div>

      <div class="quizIntro">
        before you overthink abhi exam ki tension lekar,<br/>
        let's check something important
      </div>

      <!-- QUIZ BODY -->
      <div id="quizBody">
        <div class="qTitle" id="qTitle"></div>

        <!-- input type question -->
        <div id="inputQ">
          <input id="qInput" placeholder="type answer ___" inputmode="numeric" />
          <div class="quizControls">
            <button id="submitBtn">Submit</button>
            <button class="secondary" id="hintBtn">Hint</button>
            <button class="danger" id="resetQuizBtn">Reset quiz</button>
          </div>
          <div class="msg" id="qMsg"></div>
        </div>

        <!-- multiple choice question -->
        <div id="mcqQ" class="hidden">
          <div class="choices" id="choices"></div>
          <div class="quizControls">
            <button class="danger" id="resetQuizBtn2">Reset quiz</button>
          </div>
          <div class="msg" id="mcqMsg"></div>
        </div>
      </div>

      <!-- RESULT -->
      <div id="quizResult" class="hidden center">
        <div class="bigWin">üéâ 100% SCORE!</div>
        <div class="subWin">If you could ace this at 9 years old, you can ace your exams now.</div>
        <div class="killer">gaand faad dio exams ki</div>
        <div class="btnRow" style="justify-content:center; margin-top:14px;">
          <button class="warn" id="toClose">Proceed üòå</button>
        </div>
      </div>
    </section>

    <!-- SECTION 6 CLOSE -->
    <section class="card center" id="close">
      <div class="sectionTitle" style="justify-content:center;">
        <h2>Section 6: Final</h2>
      </div>

      <div class="subWin" style="max-width:700px;">
        pass hoga ya fail hoga, i‚Äôm still choosing you. But let‚Äôs pass fir starfish heh only if you want otherwise 10 years of good starfish for you with someone else :)
      </div>

      <div class="btnRow" style="justify-content:center; margin-top:16px;">
        <button id="closeTabBtn">Close this tab &amp; make me proud</button>
        <button class="secondary" id="copyMsgBtn">Copy ‚ÄúI‚Äôm studying‚Äù text</button>
      </div>

      <div class="small" id="closeHint">
        (If it doesn‚Äôt auto-close, then actually close it yourself. Haan. Ab.)
      </div>
    </section>
  </div>

  <div class="toast" id="toast">Saved ‚úÖ</div>

<script>
  // ===== Helpers =====
  const toast = document.getElementById('toast');
  function showToast(text="Saved ‚úÖ"){
    toast.textContent = text;
    toast.classList.add('show');
    setTimeout(()=>toast.classList.remove('show'), 1400);
  }
  function scrollToId(id){
    document.getElementById(id).scrollIntoView({behavior:'smooth', block:'start'});
  }

  // Date chip
  const today = new Date();
  const fmt = today.toLocaleDateString(undefined, { weekday:'long', day:'numeric', month:'short', year:'numeric' });
  document.getElementById('today').textContent = fmt;

  // Buttons navigation
  document.getElementById('startStudyingBtn').addEventListener('click', ()=>scrollToId('s2'));
  document.getElementById('jumpQuizBtn').addEventListener('click', ()=>scrollToId('quiz'));
  document.getElementById('goS4').addEventListener('click', ()=>scrollToId('s4'));
  document.getElementById('goQuiz').addEventListener('click', ()=>scrollToId('quiz'));
  document.getElementById('scrollToClose').addEventListener('click', ()=>scrollToId('close'));

  // ===== Mission: tasks + progress (localStorage) =====
  const tasksBox = document.getElementById('tasksBox');
  const progressInput = document.getElementById('progressInput');
  const bar = document.getElementById('bar');
  const progressText = document.getElementById('progressText');
  const statusChip = document.getElementById('statusChip');

  // load saved
  const savedTasks = localStorage.getItem('khushi_tasks');
  const savedProg = localStorage.getItem('khushi_progress');
  if(savedTasks) tasksBox.value = savedTasks;
  if(savedProg !== null){
    progressInput.value = savedProg;
    setProgress(Number(savedProg));
  } else {
    setProgress(0);
  }

  function setProgress(p){
    const pct = Math.max(0, Math.min(100, Number(p) || 0));
    bar.style.width = pct + '%';
    progressText.textContent = `Progress: ${pct}%`;
    if(pct >= 100){
      statusChip.textContent = "Complete ‚úÖ";
      showToast("Okay king. Now go claim it in the exam too üëë");
    } else if(pct >= 50){
      statusChip.textContent = "In Progress";
    } else {
      statusChip.textContent = "In Progress";
    }
  }

  function saveMission(){
    localStorage.setItem('khushi_tasks', tasksBox.value || "");
    const p = Math.max(0, Math.min(100, Number(progressInput.value) || 0));
    localStorage.setItem('khushi_progress', String(p));
    setProgress(p);
    showToast("Saved ‚úÖ");
  }

  document.getElementById('saveMission').addEventListener('click', saveMission);
  tasksBox.addEventListener('input', ()=>localStorage.setItem('khushi_tasks', tasksBox.value || ""));
  progressInput.addEventListener('input', ()=>{
    const p = Math.max(0, Math.min(100, Number(progressInput.value) || 0));
    localStorage.setItem('khushi_progress', String(p));
    setProgress(p);
  });

  // quick set buttons
  document.querySelectorAll('button[data-p]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const p = Number(btn.getAttribute('data-p'));
      progressInput.value = p;
      localStorage.setItem('khushi_progress', String(p));
      setProgress(p);
      showToast(`Set to ${p}%`);
    });
  });

  // ===== Pomodoro Timer =====
  let phase = "focus"; // focus/break
  let remaining = 25*60;
  let running = false;
  let interval = null;

  const timerEl = document.getElementById('timer');
  const timerLabel = document.getElementById('timerLabel');
  const toggleBtn = document.getElementById('timerToggle');

  function format(sec){
    const m = Math.floor(sec/60);
    const s = sec % 60;
    return `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
  }
  function setPhase(p){
    phase = p;
    if(phase === "focus"){
      remaining = 25*60;
      timerLabel.textContent = "Focus session (25 min)";
    }else{
      remaining = 5*60;
      timerLabel.textContent = "Break (5 min) ‚Äî breathe + water";
    }
    timerEl.textContent = format(remaining);
  }
  function tick(){
    remaining--;
    timerEl.textContent = format(remaining);
    if(remaining <= 0){
      clearInterval(interval);
      interval = null;
      running = false;
      toggleBtn.textContent = "Start ‚ñ∂";
      if(phase === "focus"){
        showToast("Focus done ‚úÖ Break time ü•§");
        setPhase("break");
      }else{
        showToast("Break done ‚úÖ Back to focus üî•");
        setPhase("focus");
      }
    }
  }
  function toggleTimer(){
    if(!running){
      running = true;
      toggleBtn.textContent = "Pause ‚è∏";
      interval = setInterval(tick, 1000);
      showToast("Timer started ‚è±");
    }else{
      running = false;
      toggleBtn.textContent = "Start ‚ñ∂";
      clearInterval(interval);
      interval = null;
      showToast("Paused ‚è∏");
    }
  }
  function resetTimer(){
    if(interval){ clearInterval(interval); interval=null; }
    running = false;
    toggleBtn.textContent = "Start ‚ñ∂";
    setPhase(phase);
    showToast("Reset ‚Ü∫");
  }
  function skipPhase(){
    if(interval){ clearInterval(interval); interval=null; }
    running = false;
    toggleBtn.textContent = "Start ‚ñ∂";
    setPhase(phase === "focus" ? "break" : "focus");
    showToast("Skipped ‚è≠");
  }
  timerEl.textContent = format(remaining);
  document.getElementById('timerToggle').addEventListener('click', toggleTimer);
  document.getElementById('timerReset').addEventListener('click', resetTimer);
  document.getElementById('timerSkip').addEventListener('click', skipPhase);

  // ===== Quiz Logic =====
  const qTitle = document.getElementById('qTitle');
  const qInput = document.getElementById('qInput');
  const qMsg = document.getElementById('qMsg');
  const submitBtn = document.getElementById('submitBtn');
  const hintBtn = document.getElementById('hintBtn');
  const inputQ = document.getElementById('inputQ');
  const mcqQ = document.getElementById('mcqQ');
  const choicesEl = document.getElementById('choices');
  const mcqMsg = document.getElementById('mcqMsg');
  const quizResult = document.getElementById('quizResult');
  const quizBody = document.getElementById('quizBody');

  const quiz = [
    {
      type:'input',
      title:'Q1: If you have 12 chocolates and eat 5, how many are left?',
      answer:'7',
      hint:'12 - 5 = ?'
    },
    {
      type:'input',
      title:'Q2: What is 8 √ó 7?',
      answer:'56',
      hint:'7√ó8 = 56'
    },
    {
      type:'input',
      title:'Q3: If a vape costs 10 euro, how much do 4 vapes cost?',
      answer:'40',
      hint:'10 √ó 4 = ?'
    },
    {
      type:'input',
      title:'Q4: What is 100 ‚àí 47?',
      answer:'53',
      hint:'Think: 100 - 50 = 50, then add 3'
    },
    {
      type:'mcq',
      title:'Q5: If you scored 100% here, what does that say about you?',
      choices:[
        'i am the king hahah',
        'i am the ravan hahahah',
        'i am getting back with khushi hahahah'
      ],
      correctIndex:2
    }
  ];

  let qIndex = Number(localStorage.getItem('khushi_quiz_index') || "0");
  if(qIndex < 0 || qIndex > quiz.length) qIndex = 0;

  function saveQuizIndex(){
    localStorage.setItem('khushi_quiz_index', String(qIndex));
  }

  function resetQuiz(){
    qIndex = 0;
    saveQuizIndex();
    quizResult.classList.add('hidden');
    quizBody.classList.remove('hidden');
    showQuestion();
    showToast("Quiz reset ‚Ü∫");
  }

  function showQuestion(){
    qMsg.textContent = "";
    qMsg.className = "msg";
    mcqMsg.textContent = "";
    mcqMsg.className = "msg";

    if(qIndex >= quiz.length){
      // show results
      quizBody.classList.add('hidden');
      quizResult.classList.remove('hidden');
      return;
    }

    const q = quiz[qIndex];
    qTitle.textContent = q.title;

    if(q.type === 'input'){
      inputQ.classList.remove('hidden');
      mcqQ.classList.add('hidden');
      qInput.value = "";
      qInput.focus();
    }else{
      inputQ.classList.add('hidden');
      mcqQ.classList.remove('hidden');
      choicesEl.innerHTML = "";
      q.choices.forEach((txt, i)=>{
        const div = document.createElement('label');
        div.className = "choice";
        div.innerHTML = `<input type="radio" name="q5" value="${i}"> <span>${txt}</span>`;
        div.addEventListener('click', ()=>{
          const picked = i;
          if(picked === q.correctIndex){
            mcqMsg.textContent = "Correct üòå";
            mcqMsg.className = "msg good";
            qIndex++;
            saveQuizIndex();
            setTimeout(()=>showQuestion(), 450);
          }else{
            mcqMsg.textContent = "Wrong üò≠ try again.";
            mcqMsg.className = "msg bad";
          }
        });
        choicesEl.appendChild(div);
      });
    }
  }

  function normalize(v){
    return String(v || "").trim().replace(/\s+/g,'');
  }

  function submitInput(){
    const q = quiz[qIndex];
    const val = normalize(qInput.value);
    if(val === normalize(q.answer)){
      qMsg.textContent = "Correct ‚úÖ moving on...";
      qMsg.className = "msg good";
      qIndex++;
      saveQuizIndex();
      setTimeout(()=>showQuestion(), 450);
    }else{
      qMsg.textContent = "Wrong üò≠ attempt again.";
      qMsg.className = "msg bad";
      qInput.focus();
      qInput.select();
    }
  }

  submitBtn.addEventListener('click', submitInput);
  qInput.addEventListener('keydown', (e)=>{
    if(e.key === 'Enter'){ e.preventDefault(); submitInput(); }
  });

  hintBtn.addEventListener('click', ()=>{
    const q = quiz[qIndex];
    if(q && q.hint){
      showToast(q.hint);
    }
  });

  document.getElementById('resetQuizBtn').addEventListener('click', resetQuiz);
  document.getElementById('resetQuizBtn2').addEventListener('click', resetQuiz);

  // Result -> close section
  document.getElementById('toClose').addEventListener('click', ()=>scrollToId('close'));

  // init quiz
  showQuestion();

  // ===== Close tab + Copy msg =====
  document.getElementById('closeTabBtn').addEventListener('click', ()=>{
    // Try to close; may fail on some browsers if not opened by script.
    window.close();
    showToast("Now actually close it and study üò≠");
    document.getElementById('closeHint').textContent =
      "(If it didn‚Äôt close: close it manually. Ab padhle.)";
  });

  document.getElementById('copyMsgBtn').addEventListener('click', ()=>{
    const txt = "I‚Äôm studying now. 2 days to go. Khushi is watching üò≠üíõ";
    (navigator.clipboard?.writeText(txt)
      .then(()=>showToast("Copied ü´∂"))
      .catch(()=>{ alert(txt); })
    );
  });
</script>
</body>
</html>
